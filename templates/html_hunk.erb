<% if hidden_line_count > 0 %>
	<div class="collapsed" id="hunk_<%= hunk_start %>">
		<div>
			<div class="divider toggle" id="toggle_collapse_<%= hunk_start %>">
				<div class="hint down_arrow">Click to collapse <%= hidden_line_count %> lines</div>
			</div>
			<% lines[(last_hunk_end+1)...hunk_start].each do |line| %>
				<div class="equal diff"> <%= escape(line) %></div>
			<% end %>
		</div>
	</div>
	<div class="divider toggle" id="toggle_expand_<%= hunk_start %>">
		<span class="marker"><%= escape(hunk_marker) %></span>
		<div class="hint down_arrow" id="expand_<%= hunk_start %>">
			Click to expand <%= hidden_line_count %> lines
		</div>
		<div class="hint up_arrow" id="collapse_<%= hunk_start %>" style="display: none">
			Click to collapse <%= hidden_line_count %> lines
		</div>
	</div>
<% elsif hunk_marker.to_s == "" %>
	<div class="divider">
		<span class="marker"><%= escape(hunk_marker) %></span>
		&nbsp;
	</div>
<% end %>

<% each_line do |code, line| %>
	<div class="<%= code %> diff"><%= escape(line) %></div>
<% end %>
