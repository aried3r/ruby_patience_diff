<% if hidden_line_count > 0 %>
  <div class='collapsed' id='collapsed_<%= hunk_start %>'>
  	<div>
  		<div class='divider' onclick='page.toggleCollapse(<%= hunk_start %>)'>
  			
  			<span>&#x25B2; Click to collapse <%= hidden_line_count %> lines</span>
  		</div>
  		<% lines[(last_hunk_end+1)...hunk_start].each do |line| %>
  			<div class='equal diff'> <%= escape(line) %></div>
  		<% end %>
  	</div>
  </div>
  <div class='divider' onclick='page.toggleCollapse(<%= hunk_start %>)'>
  	<span class='marker diff'><%= escape(hunk_marker) %></span>
  	<span class='hint'>&#x25BC; Click to expand <%= hidden_line_count %> lines</span>
  </div>
<% else %>
  <div class='divider'>
  	<span class='marker diff'><%= escape(hunk_marker) %></span>
  </div>
<% end %>

<% each_line do |code, line| %>
  <div class='<%= code %> diff'><%= escape(line) %></div>
<% end %>
